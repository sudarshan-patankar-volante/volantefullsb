<apex:page controller="VG_Revise_NordicsProductSteps" sidebar="false" showHeader="false">
    <head>
        <style>
            .disabled
            {
            border: 1px solid #999999;
            background-color: #dddddd;
            color: #666666;
            opacity: 0.65; 
            cursor: not-allowed;
            }
        </style>
        <script type="text/Javascript">
            function SubmitOnClick (objSubmitBtn) {
            
            document.getElementById(objSubmitBtn.id).disabled = true;
            document.getElementById(objSubmitBtn.id).classList.add("disabled");
            objSubmitBtn.value = "Savingâ€¦";
            doSubmit();
            }
        </script>
    </head>
    
    <apex:form id="f1"> 
        <div style="width: 100%; margin-bottom:  10px;margin-top: 10px;margin-left:150px;">
            <img src="{!$Resource.Path_Finish_IMG}" alt="Smiley face" height="50px" width="950px" style="margin-left: 15px;margin-top: 15px;margin-bottom:10px;"/>
        </div> 
        <apex:pageMessages ></apex:pageMessages>  
        <apex:pageBlock title="Summary" tabStyle="Account" id="pg1" rendered="{!(!IsProperty && MTAType == null) || (!IsProperty && MTAType=='Revision of Cover')}">
            
            <apex:pageBlockButtons location="top">
                <apex:commandButton action="{!Cancel}" value="Cancel" onclick="if(!confirm('Are you sure?')){return false;}"/><apex:commandButton value="Previous" action="{!gotoStep4b}" />
                <apex:commandButton value="Finish" id="Submit" onClick="SubmitOnClick(this);" />
                <apex:actionFunction name="doSubmit" action="{!Finish}" />
             </apex:pageBlockButtons>
            
            <apex:pageBlockSection >
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Risk Premium</apex:outputLabel>
                    <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!netBasePremium_Converted }"/></apex:outputText>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Technical Model Premium</apex:outputLabel>
                    <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!techModelPremium}"/></apex:outputText>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Endorsement Premium</apex:outputLabel>
                    <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!endorsementPremium}"/></apex:outputText>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >UW Adjustment</apex:outputLabel>
                    <apex:inputText value="{!adjustmentTechPremium}"><apex:actionSupport event="onchange" action="{!UpdateFinalCalculations}"  reRender="pg1"/></apex:inputText>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Net Model Premium</apex:outputLabel>
                    <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!netModelPremium}"/></apex:outputText>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Technical UW Premium</apex:outputLabel>
                    <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!uwPremium }"/></apex:outputText>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem rendered="{!price.VG_Product__c != 'Clinical Trials'}" >
                    <apex:outputLabel >Layer</apex:outputLabel>
                    <apex:selectList id="s" size="1" value="{!layer}" >
                        <apex:actionSupport event="onchange" action="{!UpdateFinalCalculations}"  reRender="pg1"/>
                        <apex:selectoption itemLabel="Primary" itemValue="Primary"></apex:selectoption>
                        <apex:selectoption itemLabel="1st XS" itemValue="1st XS"></apex:selectoption>
                        <apex:selectoption itemLabel="2nd XS" itemValue="2nd XS"></apex:selectoption>
                        <apex:selectoption itemLabel="3rd XS" itemValue="3rd XS"></apex:selectoption>
                        <apex:selectoption itemLabel="4th XS" itemValue="4th XS"></apex:selectoption>
                        <apex:selectoption itemLabel="5th XS" itemValue="5th XS"></apex:selectoption>
                        <apex:selectoption itemLabel="6th XS" itemValue="6th XS"></apex:selectoption>
                    </apex:selectList>    
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem rendered="{!price.VG_Product__c == 'Clinical Trials'}" >
                    <apex:outputLabel >Layer</apex:outputLabel>
                    <apex:outputLabel >Primary</apex:outputLabel>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Commercial Adjustment </apex:outputLabel>
                    <apex:inputText value="{!adjustment}"><apex:actionSupport event="onchange" action="{!UpdateFinalCalculations}"  reRender="pg1"/></apex:inputText>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Limit</apex:outputLabel>
                    <apex:inputText value="{!limitAmount_Converted}"><apex:actionSupport event="onchange" action="{!UpdateFinalCalculations}"  reRender="pg1"/></apex:inputText>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Actual Premium</apex:outputLabel>
                    <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!actualPremium}"/></apex:outputText>
                </apex:pageBlockSectionItem> 
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Attachment</apex:outputLabel>
                    <apex:inputText value="{!attachment_Converted}"><apex:actionSupport event="onchange" action="{!UpdateFinalCalculations}"  reRender="pg1"/></apex:inputText>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Brokerage(%)</apex:outputLabel>
                    <apex:outputPanel styleClass="requiredInput" layout="block" id="pwPanel2" >
                    <apex:outputPanel styleClass="requiredBlock"/>                                                                                                                    
                        <apex:inputText value="{!brokerage}"><apex:actionSupport event="onchange" action="{!UpdateFinalCalculations}"  reRender="pg1"/></apex:inputText>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >ILF Factor</apex:outputLabel>
                    <apex:selectList id="s" size="1" value="{!ILFFactor}" >
                        <apex:actionSupport event="onchange" action="{!UpdateFinalCalculations}"  reRender="pg1"/>
                        <apex:selectoption itemLabel="Low" itemValue="Low"></apex:selectoption>
                        <apex:selectoption itemLabel="Medium Low" itemValue="Medium Low"></apex:selectoption>
                        <apex:selectoption itemLabel="Medium" itemValue="Medium"></apex:selectoption>
                        <apex:selectoption itemLabel="Medium High" itemValue="Medium High"></apex:selectoption>
                        <apex:selectoption itemLabel="High" itemValue="High"></apex:selectoption>
                    </apex:selectList>    
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Brokerage(Amount)</apex:outputLabel>
                    <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!brokerageAmount }"/></apex:outputText>
                </apex:pageBlockSectionItem> 
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >ILF Premium</apex:outputLabel>
                    <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!ilfPremium}"/></apex:outputText>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Gross Written Premium</apex:outputLabel>
                    <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!grossWrittenPremium}"/></apex:outputText>
                </apex:pageBlockSectionItem> 
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Rate Online Premium</apex:outputLabel>
                    <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!ROL}"/></apex:outputText>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel ></apex:outputLabel>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Technical Layer Premium</apex:outputLabel>
                    <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!techLayerPremium }"/></apex:outputText>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem >
                        <apex:outputLabel >Rate Change (%)</apex:outputLabel>
                        <apex:outputPanel styleClass="requiredInput" layout="block" id="pwPanel2" >
                        <apex:outputPanel styleClass="requiredBlock"/>
                        <apex:inputText value="{!RateChange}"></apex:inputText>
                        </apex:outputPanel>
                </apex:pageBlockSectionItem> 
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Rate Per Mill</apex:outputLabel>
                    <apex:outputText value="{0, number,#####0.00}"><apex:param value="{!RPM}"/></apex:outputText>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Levies</apex:outputLabel>
                    <apex:inputText value="{!levies}"><apex:actionSupport event="onchange" action="{!UpdateFinalCalculations}"  reRender="pg1"/></apex:inputText>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Written Share (%)</apex:outputLabel>
                    <apex:inputText value="{!writtenShare}"><apex:actionSupport event="onchange" action="{!UpdateFinalCalculations}"  reRender="pg1"/></apex:inputText>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Fee Income</apex:outputLabel>
                    <apex:inputText value="{!feeIncome}"><apex:actionSupport event="onchange" action="{!UpdateFinalCalculations}"  reRender="pg1"/></apex:inputText>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Signed Share (%)</apex:outputLabel>
                    <apex:inputText value="{!sharePercent}"><apex:actionSupport event="onchange" action="{!UpdateFinalCalculations}"  reRender="pg1"/></apex:inputText>
                </apex:pageBlockSectionItem>    
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Gross Or Net Premium</apex:outputLabel>
                    <apex:selectList id="s" size="1" value="{!GrossOrNet}" >
                        <apex:actionSupport event="onchange" action="{!UpdateFinalCalculations}"  reRender="pg1"/>
                        <apex:selectoption itemLabel="Gross" itemValue="Gross"></apex:selectoption>
                        <apex:selectoption itemLabel="Net" itemValue="Net"></apex:selectoption>
                    </apex:selectList>    
                </apex:pageBlockSectionItem>                  
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Sum Insured(Amount)</apex:outputLabel>
                    <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!sumInsured}"/></apex:outputText>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Transactional Premium</apex:outputLabel>
                    <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!transactionPremium }"/></apex:outputText>
                </apex:pageBlockSectionItem>   
                <apex:pageBlockSectionItem rendered="{!ps.VG_Is_Co_Insurance__c}">
                    <apex:outputLabel >Is Co-Insurance ?</apex:outputLabel>
                    <apex:outputField value="{!ps.VG_Is_Co_Insurance__c}" ></apex:outputField>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem rendered="{!!ps.VG_Is_Co_Insurance__c}">
                    <apex:outputLabel >Is Co-Insurance ?</apex:outputLabel>
                    <apex:inputField value="{!ps.VG_Is_Co_Insurance__c}" ></apex:inputField>
                </apex:pageBlockSectionItem> 
                <apex:pageBlockSectionItem rendered="{!(ps.VG_MTA_Type__c == 'Extension' || ps.VG_MTA_Type__c == 'Cancellation' || ps.VG_MTA_Type__c == 'Reduction')}">
                    <apex:outputLabel >Split Type</apex:outputLabel>
                    <apex:outputLabel >{!ps.Split_Type__c}</apex:outputLabel>                    
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem rendered="{!(ps.VG_MTA_Type__c != 'Extension' && ps.VG_MTA_Type__c != 'Cancellation' && ps.VG_MTA_Type__c != 'Reduction')}">
                    <apex:outputLabel >Split Type</apex:outputLabel>
                    <apex:selectList value="{!ps.Split_Type__c}" size="1" style="width:200px;">
                        <apex:selectOptions value="{!splitTypes}"></apex:selectOptions>
                        <apex:actionSupport event="onchange" action="{!UpdateFinalCalculations}"  reRender="pg1"/>                        
                    </apex:selectList>
                </apex:pageBlockSectionItem>
                                
                <apex:pageBlockSectionItem rendered="{!(ps.Split_Type__c == 'EEA')}">
                    <apex:outputLabel >Entity</apex:outputLabel>
                    <apex:selectList value="{!ps.VG_Volante_Entities__c}" size="1" style="width:100px;">
                        <apex:selectOptions value="{!EEAVolanteEntity_Select}"></apex:selectOptions>
                    </apex:selectList>
                </apex:pageBlockSectionItem> 
            </apex:pageBlockSection>
            
            <apex:pageBlockSection title="Included Risk Ratings" columns="1" >
                
                <apex:pageMessage severity="Info" summary="No Risk ratings added" strength="3" rendered="{!riskRatingList.size == 0}"/>
                
                <apex:pageBlockTable value="{!riskRatingList }" var="rr" rendered="{!riskRatingList.size != 0}">
                    
                    <apex:column title="Coverage" >
                        <apex:facet name="header"><h3>Coverage</h3></apex:facet>
                        <apex:outputField value="{!rr.psa.VG_Coverage__c}"/>
                    </apex:column>
                    
                    <apex:column title="Deductible">
                        <apex:facet name="header"><h3>Deductible</h3></apex:facet>
                        <apex:outputField value="{!rr.psa.VG_Deductible__c}"/>
                    </apex:column>
                    
                    <apex:column title="Sub-limit">
                        <apex:facet name="header"><h3>Sub-limit</h3></apex:facet>
                        <apex:outputField value="{!rr.psa.VG_Sub_limit__c}"/>
                    </apex:column>
                    
                </apex:pageBlockTable>
                
            </apex:pageBlockSection>
            
            <apex:pageBlockSection title="Included Sub-Limits" columns="1" >
                <apex:pageMessage severity="Info" summary="No Sub-Limits added" strength="3" rendered="{!existingEndorsements1.size == 0}"/>
                <apex:pageBlockTable value="{!existingEndorsements1}" var="EN" id="pbt1" rendered="{!existingEndorsements1.size != 0}">
                    <apex:column headerValue="Description" width="70%">
                        <apex:outputField styleClass="OutputField" id="ILETEDSsE" value="{!EN.VG_Title__c }" style="width:950px;"/><br/><br/>
                        <apex:outputField value="{!EN.VG_Endorsement_Details__c}" /><br/><br/>
                    </apex:column>
                    <apex:column headerValue="Premium" width="20%">
                        <apex:outputField value="{!EN.VG_Premium__c}" />
                    </apex:column>
                    <apex:column headerValue="Sub-limit" width="20%">
                        <apex:outputField value="{!EN.VG_Sub_limit__c}" />
                    </apex:column>
                </apex:pageBlockTable>
            </apex:pageBlockSection>
            
            <apex:pageBlockSection title="Included Endorsements" columns="1" >
                <apex:pageMessage severity="Info" summary="No Endorsements added" strength="3" rendered="{!existingEndorsements.size == 0}"/>
                <apex:pageBlockTable value="{!existingEndorsements}" var="EN" id="pbt1" rendered="{!existingEndorsements.size != 0}">
                    <apex:column headerValue="Description" width="90%">
                        <apex:outputField styleClass="OutputField" id="ILETEDSsE" value="{!EN.VG_Title__c }" style="width:950px;"/><br/><br/>
                        <apex:outputField value="{!EN.VG_Endorsement_Details__c}" /><br/><br/>
                    </apex:column>
                    <apex:column headerValue="Premium" width="20%">
                        <apex:outputField value="{!EN.VG_Premium__c}" />
                    </apex:column>
                    <apex:column headerValue="Sub-limit" width="20%">
                        <apex:outputField value="{!EN.VG_Sub_limit__c}" />
                    </apex:column>
                </apex:pageBlockTable>
            </apex:pageBlockSection>
            
        </apex:pageBlock>
        
        <apex:pageBlock title="Summary" tabStyle="Account" id="pg2" rendered="{!(IsProperty && MTAType == null) || (IsProperty && MTAType=='Revision of Cover')}">
            <apex:pageBlockButtons location="top">
                <apex:commandButton action="{!Cancel}" value="Cancel" onclick="if(!confirm('Are you sure?')){return false;}"/><apex:commandButton value="Previous" action="{!gotoStep4b}"/>
                <apex:commandButton value="Finish" id="Submit" onClick="SubmitOnClick(this);" />
                <apex:actionFunction name="doSubmit" action="{!Finish}" />
            </apex:pageBlockButtons>
            <apex:pageBlockSection >
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Risk Premium</apex:outputLabel>
                    <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!netBasePremium_Converted }"/></apex:outputText>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Actual Premium</apex:outputLabel>
                    <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!actualPremium}"/></apex:outputText>
                </apex:pageBlockSectionItem> 
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Endorsement Premium</apex:outputLabel>
                    <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!endorsementPremium}"/></apex:outputText>
                </apex:pageBlockSectionItem>  
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Brokerage(%)</apex:outputLabel>
                    <apex:inputText value="{!brokerage}"><apex:actionSupport event="onchange" action="{!UpdateFinalCalculations}"  reRender="pg2"/></apex:inputText>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Net Model Premium</apex:outputLabel>
                    <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!netModelPremium}"/></apex:outputText>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Brokerage</apex:outputLabel>
                    <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!brokerageAmount }"/></apex:outputText>
                </apex:pageBlockSectionItem>   
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Written Share (%)</apex:outputLabel>
                    <apex:inputText value="{!writtenShare}"><apex:actionSupport event="onchange" action="{!UpdateFinalCalculations}"  reRender="pg2"/></apex:inputText>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Gross Written Premium</apex:outputLabel>
                    <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!grossWrittenPremium}"/></apex:outputText>
                </apex:pageBlockSectionItem> 
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Signed Share (%)</apex:outputLabel>
                    <apex:inputText value="{!sharePercent}"><apex:actionSupport event="onchange" action="{!UpdateFinalCalculations}"  reRender="pg2"/></apex:inputText>
                </apex:pageBlockSectionItem>  
                <apex:pageBlockSectionItem >
                </apex:pageBlockSectionItem> 
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Technical Model Premium</apex:outputLabel>
                    <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!techModelPremium }"/></apex:outputText>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Fee Income</apex:outputLabel>
                    <apex:inputText value="{!feeIncome}"><apex:actionSupport event="onchange" action="{!UpdateFinalCalculations}"  reRender="pg2"/></apex:inputText>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >UW Adjustment</apex:outputLabel>
                    <apex:inputText value="{!adjustmentTechPremium}"><apex:actionSupport event="onchange" action="{!UpdateFinalCalculations}"  reRender="pg2"/></apex:inputText>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Levies</apex:outputLabel>
                    <apex:inputText value="{!levies}"><apex:actionSupport event="onchange" action="{!UpdateFinalCalculations}"  reRender="pg2"/></apex:inputText>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Technical UW Premium</apex:outputLabel>
                    <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!uwPremium }"/></apex:outputText>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Gross Or Net Premium</apex:outputLabel>
                    <apex:selectList id="s" size="1" value="{!GrossOrNet}" >
                        <apex:actionSupport event="onchange" action="{!UpdateFinalCalculations}"  reRender="pg2"/>
                        <apex:selectoption itemLabel="Gross" itemValue="Gross"></apex:selectoption>
                        <apex:selectoption itemLabel="Net" itemValue="Net"></apex:selectoption>
                    </apex:selectList>    
                </apex:pageBlockSectionItem> 
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Commercial Adjustment </apex:outputLabel>
                    <apex:inputText value="{!adjustment}"><apex:actionSupport event="onchange" action="{!UpdateFinalCalculations}"  reRender="pg2"/></apex:inputText>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Transactional Premium</apex:outputLabel>
                    <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!transactionPremium }"/></apex:outputText>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Rate Change (%)</apex:outputLabel>
                    <apex:outputPanel styleClass="requiredInput" layout="block" id="pwPanel2" >
                    <apex:outputPanel styleClass="requiredBlock"/>
                    <apex:inputText value="{!RateChange}"></apex:inputText>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                 <apex:pageBlockSectionItem rendered="{!ps.VG_Is_Co_Insurance__c}">
                    <apex:outputLabel >Is Co-Insurance ?</apex:outputLabel>
                    <apex:outputField value="{!ps.VG_Is_Co_Insurance__c}" ></apex:outputField>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem rendered="{!!ps.VG_Is_Co_Insurance__c}">
                    <apex:outputLabel >Is Co-Insurance ?</apex:outputLabel>
                    <apex:inputField value="{!ps.VG_Is_Co_Insurance__c}" ></apex:inputField>
                </apex:pageBlockSectionItem> 
                <apex:pageBlockSectionItem rendered="{!(ps.VG_MTA_Type__c == 'Extension' || ps.VG_MTA_Type__c == 'Cancellation' || ps.VG_MTA_Type__c == 'Reduction')}">
                    <apex:outputLabel >Split Type</apex:outputLabel>
                    <apex:outputLabel >{!ps.Split_Type__c}</apex:outputLabel>                    
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem rendered="{!(ps.VG_MTA_Type__c != 'Extension' && ps.VG_MTA_Type__c != 'Cancellation' && ps.VG_MTA_Type__c != 'Reduction')}">
                    <apex:outputLabel >Split Type</apex:outputLabel>
                    <apex:selectList value="{!ps.Split_Type__c}" size="1" style="width:200px;">
                        <apex:selectOptions value="{!splitTypes}"></apex:selectOptions>
                        <apex:actionSupport event="onchange" action="{!UpdateFinalCalculations}"  reRender="pg2"/>                        
                    </apex:selectList>
                </apex:pageBlockSectionItem>               
                <apex:pageBlockSectionItem rendered="{!(ps.Split_Type__c == 'EEA')}">
                    <apex:outputLabel >Entity</apex:outputLabel>
                    <apex:selectList value="{!ps.VG_Volante_Entities__c}" size="1" style="width:100px;">
                        <apex:selectOptions value="{!EEAVolanteEntity_Select}"></apex:selectOptions>
                    </apex:selectList>
                </apex:pageBlockSectionItem>                
            </apex:pageBlockSection>
            <apex:pageBlockSection title="Included Risk Ratings" columns="1" >
                <apex:pageMessage severity="Info" summary="No Risk ratings added" strength="3" rendered="{!assetList.size == 0}"/>
                <apex:pageBlockTable value="{!assetList}" var="rr" rendered="{!assetList.size != 0}">
                    <apex:column headerValue="Total Property Damage SI">
                        <apex:outputText value="{0, number, ###,###,###,##0.00}">
                            <apex:param value="{!RR.totalPropertyDamageSI}" />
                        </apex:outputText>
                    </apex:column>
                    <apex:column headerValue="Total Business Interruption SI">
                        <apex:outputText value="{0, number, ###,###,###,##0.00}">
                            <apex:param value="{!RR.totalBusinessInterruptionSI}" />
                        </apex:outputText>
                    </apex:column>
                    <apex:column headerValue="Total Sum Insured SI">
                        <apex:outputText value="{0, number, ###,###,###,##0.00}">
                            <apex:param value="{!RR.totalSumInsuredSI}" />
                        </apex:outputText>
                    </apex:column>
                    <apex:column headerValue="Full Value">
                        <apex:outputText value="{0, number, ###,###,###,##0.00}">
                            <apex:param value="{!RR.FullValue}" />
                        </apex:outputText>
                    </apex:column>
                    <apex:column headerValue="Net PD Premium">
                        <apex:outputText value="{0, number, ###,###,###,##0.00}">
                            <apex:param value="{!RR.NetPDPremium}" />
                        </apex:outputText>
                    </apex:column>
                    <apex:column headerValue="Net BI Premium">
                        <apex:outputText value="{0, number, ###,###,###,##0.00}">
                            <apex:param value="{!RR.NetBIPremium}" />
                        </apex:outputText>
                    </apex:column>
                    <apex:column headerValue="Net MB Premium">
                        <apex:outputText value="{0, number, ###,###,###,##0.00}">
                            <apex:param value="{!RR.AdjustedMBPremium}" />
                        </apex:outputText>
                    </apex:column>
                    <apex:column headerValue="Net Risk Premium">
                        <apex:outputText value="{0, number, ###,###,###,##0.00}">
                            <apex:param value="{!RR.NetRiskPremium}" />
                        </apex:outputText>
                    </apex:column>
                </apex:pageBlockTable>
            </apex:pageBlockSection>
            <apex:pageBlockSection title="Included Sub-Limits" columns="1" >
                <apex:pageMessage severity="Info" summary="No Sub-Limits added" strength="3" rendered="{!existingEndorsements1.size == 0}"/>
                <apex:pageBlockTable value="{!existingEndorsements1}" var="EN" id="pbt1" rendered="{!existingEndorsements1.size != 0}">
                    <apex:column headerValue="Description" width="70%">
                        <apex:outputField styleClass="OutputField" id="ILETEDSsE" value="{!EN.VG_Title__c }" style="width:950px;"/><br/><br/>
                        <apex:outputField value="{!EN.VG_Endorsement_Details__c}" /><br/><br/>
                    </apex:column>
                    <apex:column headerValue="Premium" width="20%">
                        <apex:outputField value="{!EN.VG_Premium__c}" />
                    </apex:column>
                    <apex:column headerValue="Sub-limit" width="20%">
                        <apex:outputField value="{!EN.VG_Sub_limit__c}" />
                    </apex:column>
                </apex:pageBlockTable>
            </apex:pageBlockSection>
            <apex:pageBlockSection title="Included Endorsements" columns="1" >
                <apex:pageMessage severity="Info" summary="No Endorsements added" strength="3" rendered="{!existingEndorsements.size == 0}"/>
                <apex:pageBlockTable value="{!existingEndorsements}" var="EN" id="pbt1" rendered="{!existingEndorsements.size != 0}">
                    <apex:column headerValue="Description" width="70%">
                        <apex:outputField styleClass="OutputField" id="ILETEDSsE" value="{!EN.VG_Title__c }" style="width:950px;"/><br/><br/>
                        <apex:outputField value="{!EN.VG_Endorsement_Details__c}" /><br/><br/>
                    </apex:column>
                    <apex:column headerValue="Premium" width="20%">
                        <apex:outputField value="{!EN.VG_Premium__c}" />
                    </apex:column>
                    <apex:column headerValue="Sub-limit" width="20%">
                        <apex:outputField value="{!EN.VG_Sub_limit__c}" />
                    </apex:column>
                </apex:pageBlockTable>
            </apex:pageBlockSection>
        </apex:pageBlock>
        
        
        <apex:pageBlock title="Summary" tabStyle="Account" id="pg3" rendered="{!MTAType != null && MTAType != 'Revision of Cover'}">
            <apex:pageBlockButtons location="top">
                <apex:commandButton action="{!Cancel}" value="Cancel" onclick="if(!confirm('Are you sure?')){return false;}"/>
                <apex:commandButton value="Finish" id="Submit" onClick="SubmitOnClick(this);" />
                <apex:actionFunction name="doSubmit" action="{!Finish}" />
            </apex:pageBlockButtons>
            
            <apex:pageBlocksection title="Mid Term Adjustment Details">   
                
                <apex:pageBlockSectionItem rendered="{!MTAType == 'Cancellation' || MTAType == 'Reduction'}" >
                    <apex:outputLabel >Current Expiry Date</apex:outputLabel>
                    <apex:outputField value="{!ps.VG_Pre_MTA_Expiry_Date__c}"/>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem rendered="{!MTAType == 'Cancellation'}"  >
                    <apex:outputLabel >Cancellation Date</apex:outputLabel>
                        <apex:inputField value="{!ps.VG_MTA_Cancellation_Date__c}" >
                        <apex:actionSupport event="onchange" action="{!UpdateAdjustmentvalues}" reRender="pg3" />                      
                    </apex:inputField>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem rendered="{!MTAType == 'Reduction'}"  >
                    <apex:outputLabel >Reduction Date</apex:outputLabel>
                        <apex:inputField value="{!ps.VG_MTA_Reduction_Date__c}" > 
                        <apex:actionSupport event="onchange" action="{!UpdateAdjustmentvalues}" reRender="pg3" />                     
                    </apex:inputField>
                </apex:pageBlockSectionItem>
               
                <apex:pageBlockSectionItem rendered="{!MTAType == 'Cancellation' }">
                    <apex:outputLabel >Reason for Cancellation</apex:outputLabel>
                    <apex:inputField value="{!ps.MTA_Reason_for_Cancellation__c}" />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem rendered="{!MTAType == 'Reduction'}">
                    <apex:outputLabel >Reason for Reduction</apex:outputLabel>
                    <apex:inputField value="{!ps.MTA_Reason_for_Cancellation__c}" />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem rendered="{!MTAType == 'Extension'}"  >
                    <apex:outputLabel >MTA Start Date</apex:outputLabel>
                    <apex:outputField value="{!ps.VG_MTA_Start_Date__c}"/>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem rendered="{!MTAType == 'Extension'}" >
                    <apex:outputLabel >MTA End Date</apex:outputLabel>
                    <apex:inputField value="{!ps.VG_MTA_End_Date__c}" >  
                    <apex:actionSupport event="onchange" action="{!UpdateAdjustmentvalues}" reRender="pg3" />                  
                    </apex:inputField>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >select Premium option</apex:outputLabel>
                    <apex:selectList value="{!seletedProrateoption}" size="1" style="width:200px;">
                        <apex:selectOptions value="{!Prorateoption}"></apex:selectOptions>
                        <apex:actionSupport event="onchange" action="{!UpdateAdjustmentvalues}" reRender="pg3" />
                    </apex:selectList>
                </apex:pageBlockSectionItem>
            </apex:pageBlocksection>
            <apex:repeat value="{!PSWrapperMap}" var="key" >
                 <apex:repeat value="{!PSWrapperMap[key]}" var="PSW" >
                    <apex:pageBlock tabStyle="VG_Policy_Schedule_Endorsement__c" title="Policy Schedule {!PSW.ps.Name}" rendered="{!PSW.ps.Product__c =='Property'}">            
                        <apex:pageBlockSection title="Policy Schedule Details" >
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Risk Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.netBasePremium_Converted }"/></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Actual Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.actualPremium}"/></apex:outputText>
                            </apex:pageBlockSectionItem> 
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Endorsement Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.endorsementPremium}"/></apex:outputText>
                            </apex:pageBlockSectionItem>  
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Brokerage(%)</apex:outputLabel>
                                <apex:inputText value="{!PSW.brokerage}"><apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/></apex:inputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Net Model Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.netModelPremium}"/></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Brokerage</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.brokerageAmount }"/></apex:outputText>
                            </apex:pageBlockSectionItem>   
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Written Share (%)</apex:outputLabel>
                                <apex:inputText value="{!PSW.writtenShare}"><apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/></apex:inputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Gross Written Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.grossWrittenPremium}"/></apex:outputText>
                            </apex:pageBlockSectionItem> 
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Signed Share (%)</apex:outputLabel>
                                <apex:inputText value="{!PSW.sharePercent}"><apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/></apex:inputText>
                            </apex:pageBlockSectionItem>  
                            <apex:pageBlockSectionItem >
                            </apex:pageBlockSectionItem> 
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Technical Model Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.techModelPremium }"/></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Fee Income</apex:outputLabel>
                                <apex:inputText value="{!PSW.feeIncome}"><apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/></apex:inputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >UW Adjustment</apex:outputLabel>
                                <apex:inputText value="{!PSW.adjustmentTechPremium}"><apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/></apex:inputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Levies</apex:outputLabel>
                                <apex:inputText value="{!PSW.levies}"><apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/></apex:inputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Technical UW Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.uwPremium }"/></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Gross Or Net Premium</apex:outputLabel>
                                <apex:selectList id="s" size="1" value="{!PSW.GrossOrNet}" >
                                    <apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/>
                                    <apex:selectoption itemLabel="Gross" itemValue="Gross"></apex:selectoption>
                                    <apex:selectoption itemLabel="Net" itemValue="Net"></apex:selectoption>
                                </apex:selectList>    
                            </apex:pageBlockSectionItem> 
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Commercial Adjustment </apex:outputLabel>
                                <apex:inputText value="{!PSW.adjustment}"><apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/></apex:inputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Transactional Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.transactionPremium }"/></apex:outputText>
                            </apex:pageBlockSectionItem>  
                            <apex:pageBlockSectionItem >
                               <apex:outputLabel >Rate Change (%)</apex:outputLabel>
                               <apex:outputPanel styleClass="requiredInput" layout="block" id="pwPanel2" >
                               <apex:outputPanel styleClass="requiredBlock"/>
                               <apex:inputText value="{!RateChange}"></apex:inputText>
                               </apex:outputPanel>
                           </apex:pageBlockSectionItem>                                         
                        </apex:pageBlockSection>
                    </apex:pageBlock>
                    
                    <apex:pageBlock tabStyle="VG_Policy_Schedule_Endorsement__c" title="Policy Schedule {!PSW.ps.Name}" rendered="{!PSW.ps.Product__c !='Property' && PSW.ps.Product__c !='Commercial Combined'}" >            
                        <apex:pageBlockSection title="Policy Schedule Details">
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Risk Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.netBasePremium_Converted }"/></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Technical Model Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.techModelPremium}"/></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Endorsement Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.endorsementPremium}"/></apex:outputText>
                            </apex:pageBlockSectionItem>                
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >UW Adjustment</apex:outputLabel>
                                <apex:inputText value="{!PSW.adjustmentTechPremium}"><apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/></apex:inputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Net Model Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.netModelPremium}"/></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Technical UW Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.uwPremium }"/></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem rendered="{!price.VG_Product__c != 'Clinical Trials'}" >
                                <apex:outputLabel >Layer</apex:outputLabel>
                                <apex:outputLabel >{!PSW.layer}</apex:outputLabel>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem rendered="{!price.VG_Product__c == 'Clinical Trials'}" >
                                <apex:outputLabel >Layer</apex:outputLabel>
                                <apex:outputLabel >Primary</apex:outputLabel>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Commercial Adjustment </apex:outputLabel>
                                <apex:inputText value="{!PSW.adjustment}"><apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/></apex:inputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Limit</apex:outputLabel>
                                <apex:outputText value="{!PSW.limitAmount_Converted}"><apex:actionSupport /></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Actual Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.actualPremium}"/></apex:outputText>
                            </apex:pageBlockSectionItem> 
                            
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Attachment</apex:outputLabel>
                                <apex:outputText value="{!PSW.attachment_Converted}"></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Brokerage(%)</apex:outputLabel>
                                <apex:outputText value="{!PSW.brokerage}"></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >ILF Factor</apex:outputLabel>
                                <apex:outputLabel >{!PSW.ILFFactor}</apex:outputLabel>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Brokerage(Amount)</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.brokerageAmount }"/></apex:outputText>
                            </apex:pageBlockSectionItem> 
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >ILF Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.ilfPremium}"/></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Gross Written Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.grossWrittenPremium}"/></apex:outputText>
                            </apex:pageBlockSectionItem> 
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Rate Online Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.ROL}"/></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel ></apex:outputLabel>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Technical Layer Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.techLayerPremium }"/></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                            </apex:pageBlockSectionItem> 
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Rate Per Mill</apex:outputLabel>
                                <apex:outputText value="{0, number,#####0.00}"><apex:param value="{!PSW.RPM}"/></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Levies</apex:outputLabel>
                                <apex:inputText value="{!PSW.levies}"><apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/></apex:inputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Written Share (%)</apex:outputLabel>
                                <apex:outputText value="{!PSW.writtenShare}"></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Fee Income</apex:outputLabel>
                                <apex:inputText value="{!PSW.feeIncome}"><apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/></apex:inputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Signed Share (%)</apex:outputLabel>
                                <apex:outputText value="{!PSW.sharePercent}"></apex:outputText>
                            </apex:pageBlockSectionItem>    
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Gross Or Net Premium</apex:outputLabel>
                                <apex:selectList id="s" size="1" value="{!PSW.GrossOrNet}" >
                                    <apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/>
                                    <apex:selectoption itemLabel="Gross" itemValue="Gross"></apex:selectoption>
                                    <apex:selectoption itemLabel="Net" itemValue="Net"></apex:selectoption>
                                </apex:selectList>    
                            </apex:pageBlockSectionItem>                  
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Sum Insured(Amount)</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.sumInsured}"/></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                               <apex:outputLabel >Rate Change (%)</apex:outputLabel>
                               <apex:outputPanel styleClass="requiredInput" layout="block" id="pwPanel2" >
                               <apex:outputPanel styleClass="requiredBlock"/>
                               <apex:inputText value="{!RateChange}"></apex:inputText>
                               </apex:outputPanel>
                           </apex:pageBlockSectionItem>                          
                        </apex:pageBlockSection>
                     </apex:pageBlock>
                     <apex:pageBlock tabStyle="VG_Policy_Schedule_Endorsement__c" title="Policy Schedule {!PSW.ps.Name}" rendered="{!PSW.ps.Product__c =='Commercial Combined'}" >                            
                         <apex:pageBlockSection >
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Risk Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.netBasePremium_Converted }"/></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Brokerage(%)</apex:outputLabel>
                                <apex:outputPanel styleClass="requiredInput" layout="block" id="pwPanel2" >
                                 <apex:outputPanel styleClass="requiredBlock"/>                                                                                                                   
                                    <apex:inputText value="{!PSW.brokerage}"><apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/></apex:inputText>
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Endorsement Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.endorsementPremium}"/></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Brokerage(Amount)</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.brokerageAmount }"/></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Net Model Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.netModelPremium}"/></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Gross Written Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.grossWrittenPremium}"/></apex:outputText>
                            </apex:pageBlockSectionItem> 
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Written Share (%)</apex:outputLabel>
                                <apex:inputText value="{!PSW.writtenShare}"><apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/></apex:inputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                               <!-- <apex:outputLabel >IPT %</apex:outputLabel>
                                <apex:inputText value="{!PSW.IPTPercent}"><apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/></apex:inputText>-->
                            </apex:pageBlockSectionItem> 
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Signed Share (%)</apex:outputLabel>
                                <apex:inputText value="{!PSW.sharePercent}"><apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/></apex:inputText>
                            </apex:pageBlockSectionItem>    
                            <apex:pageBlockSectionItem >
                                <!--<apex:outputLabel >IPT Amount</apex:outputLabel>
                                <apex:inputText value="{!PSW.IPTAmount}"><apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/></apex:inputText>-->
                            </apex:pageBlockSectionItem> 
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Technical Model Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.techModelPremium}"/></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Levies</apex:outputLabel>
                                <apex:inputText value="{!PSW.ps.Levies__c}"><apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/></apex:inputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >UW Adjustment</apex:outputLabel>
                                <apex:inputText value="{!PSW.adjustmentTechPremium}"><apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/></apex:inputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Fee Income</apex:outputLabel>
                                <apex:inputText value="{!PSW.ps.VG_Fee_Income__c}"><apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/></apex:inputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Technical UW Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.uwPremium }"/></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Gross Or Net Premium</apex:outputLabel>
                                 <apex:selectList id="s" size="1" value="{!PSW.GrossOrNet}" >
                                        <apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/>
                                        <apex:selectoption itemLabel="Gross" itemValue="Gross"></apex:selectoption>
                                        <apex:selectoption itemLabel="Net" itemValue="Net"></apex:selectoption>
                                 </apex:selectList>    
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Commercial Adjustment </apex:outputLabel>
                                <apex:inputText value="{!PSW.adjustment}"><apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/></apex:inputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Payee</apex:outputLabel>
                                <apex:inputText value="{!PSW.limitAmount_Converted}"><apex:actionSupport event="onchange" action="{!updateCancelExtendCalc}"  reRender="pg3"/></apex:inputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Actual Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.actualPremium}"/></apex:outputText>
                            </apex:pageBlockSectionItem> 
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel >Transactional Premium</apex:outputLabel>
                                <apex:outputText value="{0, number,###,##0.00}"><apex:param value="{!PSW.transactionPremium }"/></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                               <apex:outputLabel >Rate Change (%)</apex:outputLabel>
                               <apex:outputPanel styleClass="requiredInput" layout="block" id="pwPanel2" >
                               <apex:outputPanel styleClass="requiredBlock"/>
                               <apex:inputText value="{!RateChange}"></apex:inputText>
                               </apex:outputPanel>
                           </apex:pageBlockSectionItem>    
                           <apex:pageBlockSectionItem rendered="{!ps.VG_Is_Co_Insurance__c}">
                                <apex:outputLabel >Is Co-Insurance ?</apex:outputLabel>
                                <apex:outputField value="{!ps.VG_Is_Co_Insurance__c}" ></apex:outputField>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem rendered="{!!ps.VG_Is_Co_Insurance__c}">
                                <apex:outputLabel >Is Co-Insurance ?</apex:outputLabel>
                                <apex:inputField value="{!ps.VG_Is_Co_Insurance__c}" ></apex:inputField>
                            </apex:pageBlockSectionItem>                                 
                        </apex:pageBlockSection>
                </apex:pageBlock>
                <apex:pageBlock >
                        <apex:pageBlockSection columns="1" title="Asset Details" collapsible="False">
                            <apex:pageMessage severity="Info" summary="No Risk ratings added" strength="3" rendered="{!!PSW.hasAssets}"/>
                            <apex:pageBlockTable value="{!PSW.psaList}" var="rr" rendered="{!PSW.hasAssets}">
                                <apex:column title="Coverage" >
                                    <apex:facet name="header"><h3>Coverage</h3></apex:facet>
                                    <apex:outputField value="{!rr.VG_Coverage__c}"/>
                                </apex:column>
                                <apex:column title="Deductible">
                                    <apex:facet name="header"><h3>Deductible</h3></apex:facet>
                                    <apex:outputField value="{!rr.VG_Deductible__c}"/>
                                </apex:column>
                                <apex:column title="Sub-limit">
                                    <apex:facet name="header"><h3>Sub-limit</h3></apex:facet>
                                    <apex:outputField value="{!rr.VG_Sub_limit__c}"/>
                                </apex:column>
                                
                            </apex:pageBlockTable>     
                        </apex:pageBlockSection>
                        <apex:pageBlockSection columns="1" title="Endorsement Details" collapsible="False">
                            <apex:pageMessage severity="Info" summary="No Endorsements added" strength="3" rendered="{!!PSW.hasEndorsements}"/>
                            <apex:pageBlockTable value="{!PSW.pseList}" var="pse" id="pbt1" rendered="{!PSW.hasEndorsements}">
                                <apex:column headerValue="Title" styleClass="s">
                                    <apex:outputpanel styleClass="s" >
                                        <b> <apex:outputField styleClass="s" value="{!pse.VG_Title__c}"   /> </b>
                                    </apex:outputpanel>
                                </apex:column>
                                <apex:column headerValue="Endorsement Details">
                                    <apex:outputField value="{!pse.VG_Endorsement_Details__c}" />
                                </apex:column>
                                <apex:column headerValue="Premium">
                                    <apex:outputText value="{0, number, ###,##0}">
                                        <apex:param value="{!pse.VG_Premium__c}"/>
                                    </apex:outputText> 
                                </apex:column>      
                            </apex:pageBlockTable>
                        </apex:pageBlockSection>
                     </apex:pageBlock>
                 </apex:repeat>
            </apex:repeat>
        </apex:pageBlock>
    </apex:form>
</apex:page>