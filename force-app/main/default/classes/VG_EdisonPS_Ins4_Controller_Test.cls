@IsTest(seeAllData=false)
public class VG_EdisonPS_Ins4_Controller_Test {
    public static testmethod void method1(){
        VG_TU.policyCustomSetting();
        Account acc=VG_TU.createAccount('Customer');  
        Utilities.SkipMethods('Bridge Context');
        VG_UMR__c u=VG_TU.createUMR(acc.id,'Edison Motor');
        Policy__c pol=VG_TU.createPolicy('Edison Motor', acc.id);
        pol.CurrencyIsoCode='USD';
        pol.VG_Expiry_Date__c=Date.newInstance(2018, 12, 18);
        update pol;
        Policy_Schedule__c ps=VG_TU.createPolicySchedule(pol.id);
        ps.VG_Base_Policy__c=true;
        ps.IPT_Percent__c=null;
        ps.VG_Technical_Model_Premium__c=4500;
        ps.Base_Creation_End_Date__c=Date.newInstance(2018, 12, 19);
        ps.Base_Creation_Start_Date__c=Date.newInstance(2017, 12, 19);
        ps.VG_MTA_Cancellation_Date__c=Date.newInstance(2018, 12, 19);
        ps.VG_Pre_MTA_Expiry_Date__c=Date.newInstance(2018, 12, 19);
        ps.VG_MTA_Start_Date__c=Date.newInstance(2017, 12, 19);
        ps.VG_MTA_End_Date__c=Date.newInstance(2019, 12, 19);
        ps.Name='Test/ps/0';
        update ps;
        Risk_Capture__c rc=VG_TU.createRiskCapture(ps.id);
        Risk_Capture__c rc1=VG_TU.createRiskCapture(ps.id);
        VG_Policy_Schedule_Asset__c psa=VG_TU.createPolicyScheduleAsset(ps.id);
        //VG_Policy_Schedule_Asset__c psa1=VG_TU.createPolicyScheduleAsset(ps.id);
        VG_Policy_Schedule_Endorsement__c pse1=VG_TU.createPolicyScheduleEndorsement(ps.id);
        VG_Policy_Schedule_Endorsement__c pse=new VG_Policy_Schedule_Endorsement__c();
        pse.Name='Test';
        pse.VG_Policy_Schedule__c=ps.id;
        pse.VG_Endorsement_Details__c='Test';
        pse.VG_Premium__c=125695;
        pse.VG_Title__c='Test';
        Insert pse;
        List<VG_Policy_Schedule_Asset__c> psaList=new List<VG_Policy_Schedule_Asset__c>();
        psaList.add(psa);
        List<VG_Policy_Schedule_Endorsement__c> pseList=new List<VG_Policy_Schedule_Endorsement__c>();
        pseList.add(pse);
        Map<Id,Policy_Schedule__c> psMap=new Map<Id,Policy_Schedule__c>();
        psMap.put(ps.id,ps);
        List<Risk_Capture__c> rcList=new List<Risk_Capture__c>();
        rcList.add(rc);
        ApexPages.currentPage().getParameters().put('id', ps.Id);
        ApexPages.currentPage().getParameters().put('policyid', pol.Id);
        ApexPages.currentPage().getParameters().put('OriginalId', ps.Id); 
        ApexPages.currentPage().getParameters().put('MTAType', null);
        Test.startTest();
        VG_EdisonPS_Ins4_Controller eps=new VG_EdisonPS_Ins4_Controller();       
        ApexPages.currentPage().getParameters().put('MTAType', 'Cancellation');
        VG_EdisonPS_Ins4_Controller eps4=new VG_EdisonPS_Ins4_Controller();
        eps4.pSchedule=ps;
        eps4.psaList=psaList;
        eps4.pseList=pseList;
        eps4.rcList=rcList;
        eps4.psList=psMap;
        eps4.Previous();
        eps4.pSchedule.VG_MTA_Cancellation_Date__c = null;
        eps4.pSchedule.VG_Brokerage_Percent__c=null;
        eps4.pSchedule.Premium_Adjustment__c=null;
        eps4.pSchedule.IPT_Percent__c = null;
        eps4.pSchedule.Levies__c=null;
        eps4.pSchedule.VG_Fee_Income__c=null;
        eps4.technicalPremiumPro=25000;
        eps4.updateCancelExtendCalc();
        eps4.MTAType='Extension';
        eps4.pSchedule.VG_MTA_End_Date__c=Date.newInstance(2018,2,2);
        eps4.pSchedule.VG_MTA_Start_Date__c=Date.newInstance(2017,2,2);
        eps4.updateCancelExtendCalc();
        eps4.pSchedule.VG_MTA_End_Date__c=null;
        eps4.updateCancelExtendCalc(); 
        Utilities.clearMethods();
        Test.stopTest();            
    }
    public static testmethod void method2(){
        VG_TU.policyCustomSetting();
        Account acc=VG_TU.createAccount('Customer');        
        Policy__c pol=VG_TU.createPolicy('Edison Motor', acc.id);
        Policy_Schedule__c ps=VG_TU.createPolicySchedule(pol.id);
        ps.VG_Base_Policy__c=true;
        ps.VG_Declaration_Type_percent__c=25;
        ps.Base_Creation_End_Date__c=Date.newInstance(2018,12,12);
        ps.Base_Creation_Start_Date__c=Date.newInstance(2017,12,12);
        update ps;
        VG_Policy_Schedule_Asset__c psa=VG_TU.createPolicyScheduleAsset(ps.id);
        psa.VG_Premium__c=12555;
        update psa;
        VG_Policy_Schedule_Endorsement__c pse=new VG_Policy_Schedule_Endorsement__c();
        pse.Name='Test';
        pse.VG_Policy_Schedule__c=ps.id;
        pse.VG_Endorsement_Details__c='Test';
        pse.VG_Premium__c=125695;
        pse.VG_Title__c='Test';
        Insert pse;
        List<VG_Policy_Schedule_Asset__c> psaList=new List<VG_Policy_Schedule_Asset__c>();
        psaList.add(psa);
        Map<Id,Policy_Schedule__c> psMap=new Map<Id,Policy_Schedule__c>();
        psMap.put(ps.id,ps);
        List<VG_Policy_Schedule_Endorsement__c> pseList=new List<VG_Policy_Schedule_Endorsement__c>();
        pseList.add(pse);
        Risk_Capture__c rc=VG_TU.createRiskCapture(ps.id);
        List<Risk_Capture__c> rcList=new List<Risk_Capture__c>();
        rcList.add(rc);
        ApexPages.currentPage().getParameters().put('id', ps.Id);
        ApexPages.currentPage().getParameters().put('policyid', pol.Id);
        ApexPages.currentPage().getParameters().put('OriginalId', ps.Id);
        ApexPages.currentPage().getParameters().put('MTAType', 'Declaration');
        Test.startTest();
        VG_EdisonPS_Ins4_Controller eps4=new VG_EdisonPS_Ins4_Controller();
        eps4.psaList=psaList;
        eps4.pseList=pseList;
        eps4.rcList=rcList;
        eps4.psList=psMap;
        eps4.Previous();
        eps4.psaList=psaList;
        eps4.rcList=rcList;
        eps4.psList=psMap;
        eps4.pseList=pseList;
        eps4.Finish();
        eps4.psaList=psaList;
        eps4.pseList=pseList;
        eps4.psList=psMap;
        eps4.rcList=rcList;
        eps4.Cancel();
        eps4.psaList=psaList;
        eps4.rcList=rcList;
        eps4.psList=psMap;
        eps4.pseList=pseList;
        eps4.pSchedule.VG_Brokerage_Percent__c=null;
        eps4.pSchedule.Premium_Adjustment__c=null;
        eps4.pSchedule.IPT_Percent__c = null;
        eps4.pSchedule.Levies__c=null;
        eps4.pSchedule.VG_Fee_Income__c=null;
        eps4.technicalPremiumPro=25000;
        eps4.updateCalc();
        eps4.pSchedule.VG_Fee_Income__c=null;
        eps4.pSchedule.Levies__c=2000;
        eps4.updateCalc();
        eps4.pSchedule.VG_Fee_Income__c=2000;
        eps4.pSchedule.Levies__c=null;
        eps4.updateCalc();
        Test.stopTest();
    }
    public static testmethod void method3(){
        VG_TU.policyCustomSetting();
        Account acc=VG_TU.createAccount('Customer');        
        Policy__c pol=VG_TU.createPolicy('Edison Motor', acc.id);
        pol.VG_Expiry_Date__c=Date.newInstance(2018, 12, 18);
        update pol;
        Policy_Schedule__c ps=VG_TU.createPolicySchedule(pol.id);
        ps.VG_Base_Policy__c=true;
        ps.VG_MTA_Cancellation_Date__c=Date.newInstance(2018, 12, 19);
        ps.VG_Pre_MTA_Expiry_Date__c=Date.newInstance(2018, 12, 19);
        update ps;
        Risk_Capture__c rc=VG_TU.createRiskCapture(ps.id);
        VG_Policy_Schedule_Asset__c psa=VG_TU.createPolicyScheduleAsset(ps.id);
        VG_Policy_Schedule_Endorsement__c pse=new VG_Policy_Schedule_Endorsement__c();
        pse.Name='Test';
        pse.VG_Policy_Schedule__c=ps.id;
        pse.VG_Endorsement_Details__c='Test';
        pse.VG_Premium__c=125695;
        pse.VG_Title__c='Test';
        Insert pse;
        List<VG_Policy_Schedule_Asset__c> psaList=new List<VG_Policy_Schedule_Asset__c>();
        psaList.add(psa);
        List<VG_Policy_Schedule_Endorsement__c> pseList=new List<VG_Policy_Schedule_Endorsement__c>();
        pseList.add(pse);
        Map<Id,Policy_Schedule__c> psMap=new Map<Id,Policy_Schedule__c>();
        psMap.put(ps.id,ps);
        List<Risk_Capture__c> rcList=new List<Risk_Capture__c>();
        rcList.add(rc);
        ApexPages.currentPage().getParameters().put('id', ps.Id);
        ApexPages.currentPage().getParameters().put('policyid', pol.Id);
        ApexPages.currentPage().getParameters().put('OriginalId', ps.Id);
        ApexPages.currentPage().getParameters().put('MTAType', 'Extension');
        Test.startTest();
        VG_EdisonPS_Ins4_Controller eps4=new VG_EdisonPS_Ins4_Controller();
        System.debug('Policy Name::'+pol.Name);
        eps4.pschedule=ps;
        eps4.psaList=psaList;
        eps4.pseList=pseList;
        eps4.rcList=rcList;
        eps4.psList=psMap;
        //eps4.Finish();
        eps4.psaList=psaList;
        eps4.rcList=rcList;
        eps4.psList=psMap;
        eps4.pseList=pseList;
        eps4.Previous();
        eps4.psaList=psaList;
        eps4.pseList=pseList;
        eps4.psList=psMap;
        eps4.rcList=rcList;
        eps4.Cancel();
        eps4.psaList=psaList;
        eps4.rcList=rcList;
        eps4.psList=psMap;
        eps4.pseList=pseList;
        eps4.gotoMTA();
        Test.stopTest();
    }
    public static testmethod void method4(){
        VG_TU.policyCustomSetting();
        Account acc=VG_TU.createAccount('Customer');        
        Policy__c pol=VG_TU.createPolicy('Edison Motor', acc.id);
        pol.VG_Expiry_Date__c=Date.newInstance(2018, 12, 18);
        update pol;
        Policy_Schedule__c ps=VG_TU.createPolicySchedule(pol.id);
        ps.VG_Base_Policy__c=true;
        ps.Base_Creation_Start_Date__c=Date.newInstance(2017, 12, 19);
        ps.Base_Creation_End_Date__c=Date.newInstance(2018, 12, 19);
        ps.VG_MTA_Cancellation_Date__c=Date.newInstance(2018, 12, 19);
        ps.VG_Pre_MTA_Expiry_Date__c=Date.newInstance(2018, 12, 19);
        update ps;
        Risk_Capture__c rc=VG_TU.createRiskCapture(ps.id);
        VG_Policy_Schedule_Asset__c psa=VG_TU.createPolicyScheduleAsset(ps.id);
        VG_Policy_Schedule_Endorsement__c pse=new VG_Policy_Schedule_Endorsement__c();
        pse.Name='Test';
        pse.VG_Policy_Schedule__c=ps.id;
        pse.VG_Endorsement_Details__c='Test';
        pse.VG_Premium__c=125695;
        pse.VG_Title__c='Test';
        Insert pse;
        List<VG_Policy_Schedule_Asset__c> psaList=new List<VG_Policy_Schedule_Asset__c>();
        psaList.add(psa);
        List<VG_Policy_Schedule_Endorsement__c> pseList=new List<VG_Policy_Schedule_Endorsement__c>();
        pseList.add(pse);
        Map<Id,Policy_Schedule__c> psMap=new Map<Id,Policy_Schedule__c>();
        psMap.put(ps.id,ps);
        List<Risk_Capture__c> rcList=new List<Risk_Capture__c>();
        rcList.add(rc);
        VG_UMR__c u=VG_TU.createUMR(acc.id,'Edison Motor');
        VG_ReInsurance__c ri=VG_TU.createReInsurance(ps.id, u.id);
        List<VG_ReInsurance__c> riList=new List<VG_ReInsurance__c>();
        riList.add(ri);
        ApexPages.currentPage().getParameters().put('id', ps.Id);
        ApexPages.currentPage().getParameters().put('policyid', pol.Id);
        ApexPages.currentPage().getParameters().put('OriginalId', ps.Id);
        ApexPages.currentPage().getParameters().put('MTAType', 'Revision of Cover');
        Test.startTest();
        VG_EdisonPS_Ins4_Controller eps4=new VG_EdisonPS_Ins4_Controller();
        eps4.pschedule=ps;
        eps4.psaList=psaList;
        eps4.pseList=pseList;
        eps4.rcList=rcList;
        eps4.psList=psMap;
        eps4.Previous();
        eps4.psaList=psaList;
        eps4.rcList=rcList;
        eps4.psList=psMap;
        eps4.pseList=pseList;
        eps4.RIList=riList;
        eps4.Finish();
        eps4.psaList=psaList;
        eps4.pseList=pseList;
        eps4.psList=psMap;
        eps4.rcList=rcList;
        eps4.Cancel();
        eps4.psaList=psaList;
        eps4.rcList=rcList;
        eps4.psList=psMap;
        eps4.pseList=pseList;
        Test.stopTest();
    }
    public static testmethod void method5(){
        VG_TU.policyCustomSetting();
        Account acc=VG_TU.createAccount('Customer');        
        Policy__c pol=VG_TU.createPolicy('Edison Motor', acc.id);
        pol.VG_Expiry_Date__c=Date.newInstance(2018, 12, 18);
        update pol;
        Policy_Schedule__c ps=VG_TU.createPolicySchedule(pol.id);
        Policy_Schedule__c ps1=VG_TU.createPolicySchedule(pol.id);
        ps1.VG_Base_Policy__c=false;
        ps.VG_Base_Policy__c=true;
        ps.IPT_Percent__c=null;
        ps.Base_Creation_End_Date__c=Date.newInstance(2018, 12, 19);
        ps.Base_Creation_Start_Date__c=Date.newInstance(2017, 12, 19);
        ps.VG_MTA_Cancellation_Date__c=Date.newInstance(2018, 12, 19);
        ps.VG_Pre_MTA_Expiry_Date__c=Date.newInstance(2018, 12, 19);
        update ps;
        ApexPages.currentPage().getParameters().put('id', ps.Id);
        ApexPages.currentPage().getParameters().put('policyid', pol.Id);
        ApexPages.currentPage().getParameters().put('OriginalId', ps.Id);        
        ApexPages.currentPage().getParameters().put('MTAType', 'Cancellation');
        Test.startTest();
        VG_EdisonPS_Ins4_Controller eps4=new VG_EdisonPS_Ins4_Controller();
        eps4.pSchedule=ps;
        Test.stopTest();
    }
    public static testmethod void method6(){
        VG_TU.policyCustomSetting();
        Account acc=VG_TU.createAccount('Customer');   
        Utilities.SkipMethods('Bridge Context');
        Policy__c pol=VG_TU.createPolicy('Edison Motor', acc.id);
        pol.VG_Expiry_Date__c=Date.newInstance(2018, 12, 18);
        update pol;
        Policy_Schedule__c ps=VG_TU.createPolicySchedule(pol.id);
        ps.VG_Base_Policy__c=true;
        ps.IPT_Percent__c=null;
        ps.VG_Technical_Model_Premium__c = 5000;
        ps.VG_MTA_End_Date__c=Date.newInstance(2019, 12, 19);
        ps.VG_MTA_Start_Date__c=Date.newInstance(2017, 12, 19);
        ps.Base_Creation_End_Date__c=Date.newInstance(2019, 12, 19);
        ps.Base_Creation_Start_Date__c=Date.newInstance(2017, 12, 19);
        ps.VG_MTA_Cancellation_Date__c=Date.newInstance(2018, 12, 19);
        ps.VG_Pre_MTA_Expiry_Date__c=Date.newInstance(2018, 12, 19);
        ps.Name='Testps';
        ps.VG_Is_MTA__c=true;
        ps.VG_MTA_Type__c='Cancellation';
        update ps;
        Risk_Capture__c rc=VG_TU.createRiskCapture(ps.id);
        Risk_Capture__c rc1=VG_TU.createRiskCapture(ps.id);
        VG_Policy_Schedule_Asset__c psa=VG_TU.createPolicyScheduleAsset(ps.id);
        VG_Policy_Schedule_Asset__c psa1=VG_TU.createPolicyScheduleAsset(ps.id);
        VG_Policy_Schedule_Endorsement__c pse1=vg_tu.createPolicyScheduleEndorsement(ps.id);
        VG_Policy_Schedule_Endorsement__c pse=new VG_Policy_Schedule_Endorsement__c();
        pse.Name='Test';
        pse.VG_Policy_Schedule__c=ps.id;
        pse.VG_Endorsement_Details__c='Test';
        pse.VG_Premium__c=125695;
        pse.VG_Title__c='Test';
        Insert pse;
        ApexPages.currentPage().getParameters().put('id', ps.Id);
        ApexPages.currentPage().getParameters().put('policyid', pol.Id);
        ApexPages.currentPage().getParameters().put('OriginalId', ps.Id);      
        ApexPages.currentPage().getParameters().put('MTAType', 'Cancellation');
        Test.startTest();
        VG_EdisonPS_Ins4_Controller eps=new VG_EdisonPS_Ins4_Controller();
        eps.pSchedule.VG_MTA_Cancellation_Date__c=Date.newInstance(2020, 12, 19);
        System.debug('call1::');
        eps.updateCancelExtendCalc();
        eps.pSchedule.VG_MTA_Cancellation_Date__c=Date.newInstance(2016, 6, 19);
        System.debug('call2::');
        ps.VG_MTA_End_Date__c=Date.newInstance(2017, 12, 18);
        ps.VG_MTA_Start_Date__c=Date.newInstance(2017, 12, 19);
        update ps;
        VG_EdisonPS_Ins4_Controller eps2=new VG_EdisonPS_Ins4_Controller();
        eps2.pSchedule.VG_MTA_Cancellation_Date__c=Date.newInstance(2016, 6, 19);
        eps2.updateCancelExtendCalc();
        //Utilities.clearMethods();
        Test.stopTest();        
    }
    public static testmethod void method7(){
        VG_TU.policyCustomSetting();
        Account acc=VG_TU.createAccount('Customer');    
        VG_UMR__c u=VG_TU.createUMR(acc.id,'Edison Motor');
        Utilities.SkipMethods('Bridge Context');
        Policy__c pol=VG_TU.createPolicy('Edison Motor', acc.id);
        pol.VG_Expiry_Date__c=Date.newInstance(2018, 12, 18);
        update pol;
        Policy_Schedule__c ps=VG_TU.createPolicySchedule(pol.id);
        ps.VG_Base_Policy__c=true;
        ps.IPT_Percent__c=null;
        ps.Base_Creation_End_Date__c=Date.newInstance(2018, 12, 19);
        ps.Base_Creation_Start_Date__c=Date.newInstance(2017, 12, 19);
        ps.VG_MTA_Cancellation_Date__c=Date.newInstance(2018, 12, 19);
        ps.VG_Pre_MTA_Expiry_Date__c=Date.newInstance(2018, 12, 19);
        ps.VG_MTA_Start_Date__c=Date.newInstance(2017, 12, 19);
        ps.VG_MTA_End_Date__c=Date.newInstance(2019, 12, 19);
        ps.Name='Testps';
        update ps;
        Risk_Capture__c rc=VG_TU.createRiskCapture(ps.id);
        Risk_Capture__c rc1=VG_TU.createRiskCapture(ps.id);
        VG_Policy_Schedule_Asset__c psa=VG_TU.createPolicyScheduleAsset(ps.id);
        VG_Policy_Schedule_Asset__c psa1=VG_TU.createPolicyScheduleAsset(ps.id);
        VG_Policy_Schedule_Endorsement__c pse1=vg_tu.createPolicyScheduleEndorsement(ps.id);
        VG_Policy_Schedule_Endorsement__c pse=new VG_Policy_Schedule_Endorsement__c();
        pse.Name='Test';
        pse.VG_Policy_Schedule__c=ps.id;
        pse.VG_Endorsement_Details__c='Test';
        pse.VG_Premium__c=125695;
        pse.VG_Title__c='Test';
        Insert pse;
        List<VG_Policy_Schedule_Asset__c> psaList=new List<VG_Policy_Schedule_Asset__c>();
        psaList.add(psa);
        List<VG_Policy_Schedule_Endorsement__c> pseList=new List<VG_Policy_Schedule_Endorsement__c>();
        pseList.add(pse);
        Map<Id,Policy_Schedule__c> psMap=new Map<Id,Policy_Schedule__c>();
        psMap.put(ps.id,ps);
        List<Risk_Capture__c> rcList=new List<Risk_Capture__c>();
        rcList.add(rc);
        ApexPages.currentPage().getParameters().put('id', ps.Id);
        ApexPages.currentPage().getParameters().put('policyid', pol.Id);
        ApexPages.currentPage().getParameters().put('OriginalId', ps.Id); 
        ApexPages.currentPage().getParameters().put('MTAType', null);
        Test.startTest();
        VG_EdisonPS_Ins4_Controller eps=new VG_EdisonPS_Ins4_Controller();       
        ApexPages.currentPage().getParameters().put('MTAType', 'Cancellation');
        VG_EdisonPS_Ins4_Controller eps4=new VG_EdisonPS_Ins4_Controller();
        //eps4.pschedule=ps;
        eps4.psaList=psaList;
        eps4.pseList=pseList;
        eps4.rcList=rcList;
        eps4.psList=psMap;
        eps4.Previous();
        eps4.psaList=psaList;
        eps4.rcList=rcList;
        eps4.psList=psMap;
        eps4.pseList=pseList;
        //Below code cover finish() all codes
        eps4.pSchedule.VG_MTA_Cancellation_Date__c=null;
        eps4.Finish();
        eps4.pSchedule.VG_Pre_MTA_Expiry_Date__c=date.newInstance(2019, 12, 10);
        eps4.pSchedule.VG_MTA_Cancellation_Date__c=date.newInstance(2019, 12, 11);
        eps4.Finish();
        eps4.pSchedule.VG_Pre_MTA_Expiry_Date__c=date.newInstance(2019, 12, 10);
        eps4.pSchedule.VG_MTA_Cancellation_Date__c=date.newInstance(2019, 12, 09);
        VG_ReInsurance__c ri=VG_TU.createReInsurance(ps.id, u.id);
        eps4.RIList=new List<VG_ReInsurance__c>();
        eps4.RIList.add(ri);
        eps4.Finish();
        eps4.MTAType='Extension';
        eps4.pschedule=ps;       
        eps4.finish();
        Utilities.clearMethods();
        Test.stopTest();
        //Below code cover finish() all codes
    }
    public static testmethod void method8(){
        //Main focus to Cover all codes for updateCancelExtendCalc()
        VG_TU.policyCustomSetting();
        Account acc=VG_TU.createAccount('Customer');    
        VG_UMR__c u=VG_TU.createUMR(acc.id,'Edison Motor');
        Policy__c pol=VG_TU.createPolicy('Edison Motor', acc.id);
        pol.VG_Expiry_Date__c=Date.newInstance(2018, 12, 18);
        update pol;
        Policy_Schedule__c ps=VG_TU.createPolicySchedule(pol.id);
        ps.VG_Base_Policy__c=true;
        ps.IPT_Percent__c=null;
        ps.VG_Technical_Model_Premium__c = 4800;
        ps.Base_Creation_End_Date__c=Date.newInstance(2018, 12, 19);
        ps.Base_Creation_Start_Date__c=Date.newInstance(2017, 12, 19);
        ps.VG_MTA_Cancellation_Date__c=Date.newInstance(2018, 12, 19);
        ps.VG_Pre_MTA_Expiry_Date__c=Date.newInstance(2018, 12, 19);
        ps.VG_MTA_Start_Date__c=Date.newInstance(2017, 12, 19);
        ps.VG_MTA_End_Date__c=Date.newInstance(2019, 12, 19);
        ps.Name='Testps';
        update ps;
        ApexPages.currentPage().getParameters().put('id', ps.Id);
        ApexPages.currentPage().getParameters().put('policyid', pol.Id);
        ApexPages.currentPage().getParameters().put('OriginalId', ps.Id); 
        ApexPages.currentPage().getParameters().put('MTAType', 'Cancellation');
        Test.startTest();
        VG_EdisonPS_Ins4_Controller eps=new VG_EdisonPS_Ins4_Controller();
        eps.updateCancelExtendCalc();
        eps.pSchedule.VG_MTA_Cancellation_Date__c=date.newInstance(2018,12,01);
        eps.updateCancelExtendCalc();
        Test.stopTest();       
    }
    public static testmethod void method9(){
        VG_TU.policyCustomSetting();
        Test.startTest();
         Utilities.SkipMethods('Trigger Context');
        Utilities.SkipMethods('Trigger Context2');
        Account acc=VG_TU.createAccount('Customer');    
        VG_UMR__c u=VG_TU.createUMR(acc.id,'Edison Motor');
        Policy__c pol=VG_TU.createPolicy('Edison Motor', acc.id);
        pol.VG_Inception_Date__c=Date.newInstance(2017, 12, 18);
        pol.VG_Expiry_Date__c=Date.newInstance(2018, 12, 18);
        update pol;
        Policy_Schedule__c ps=VG_TU.createPolicySchedule(pol.id);
        ps.VG_Base_Policy__c=true;
        ps.IPT_Percent__c=null;
        ps.Base_Creation_End_Date__c=Date.newInstance(2018, 12, 19);
        ps.Base_Creation_Start_Date__c=Date.newInstance(2017, 12, 19);
        ps.VG_MTA_Cancellation_Date__c=Date.newInstance(2018, 12, 19);
        ps.VG_Pre_MTA_Expiry_Date__c=Date.newInstance(2018, 12, 19);
        ps.VG_MTA_Start_Date__c=Date.newInstance(2017, 12, 19);
        ps.VG_MTA_End_Date__c=Date.newInstance(2019, 12, 19);
        ps.Name='Testps';
        update ps;
        Risk_Capture__c rc=VG_TU.createRiskCapture(ps.id);
        Risk_Capture__c rc1=VG_TU.createRiskCapture(ps.id);
        VG_Policy_Schedule_Asset__c psa=VG_TU.createPolicyScheduleAsset(ps.id);
        VG_Policy_Schedule_Asset__c psa1=VG_TU.createPolicyScheduleAsset(ps.id);
        VG_Policy_Schedule_Endorsement__c pse1=vg_tu.createPolicyScheduleEndorsement(ps.id);
        VG_Policy_Schedule_Endorsement__c pse=new VG_Policy_Schedule_Endorsement__c();
        pse.Name='Test';
        pse.VG_Policy_Schedule__c=ps.id;
        pse.VG_Endorsement_Details__c='Test';
        pse.VG_Premium__c=125695;
        pse.VG_Title__c='Test';
        Insert pse;
        List<VG_Policy_Schedule_Asset__c> psaList=new List<VG_Policy_Schedule_Asset__c>();
        psaList.add(psa);
        List<VG_Policy_Schedule_Endorsement__c> pseList=new List<VG_Policy_Schedule_Endorsement__c>();
        pseList.add(pse);
        Map<Id,Policy_Schedule__c> psMap=new Map<Id,Policy_Schedule__c>();
        psMap.put(ps.id,ps);
        List<Risk_Capture__c> rcList=new List<Risk_Capture__c>();
        rcList.add(rc);
        ApexPages.currentPage().getParameters().put('id', ps.Id);
        ApexPages.currentPage().getParameters().put('policyid', pol.Id);
        ApexPages.currentPage().getParameters().put('OriginalId', ps.Id);
        ApexPages.currentPage().getParameters().put('MTAType', 'Extension');
        //Test.startTest();
        VG_EdisonPS_Ins4_Controller eps4=new VG_EdisonPS_Ins4_Controller();
        
      
        VG_EdisonPS_Ins4_Controller.PSWrapper psw = new VG_EdisonPS_Ins4_Controller.PSWrapper();
        psw.techUWPre = 12;
        psw.actualPremium =23;
        psw.brokerageAmount =32;
        psw.technicalPremium =34;
        psw.techModelPremium =56;
        psw.endPro =44;
        psw.netModelPremium =23;
        psw.RIPro =54;
        psw.transactionalPremium =45;
          eps4.pschedule.VG_MTA_End_Date__c=Date.newInstance(2019, 12, 19);
        eps4.Finish();
        Utilities.clearMethods();
        Test.stopTest();
    }
}